{
  "comments": [
    {
      "key": {
        "uuid": "951ed0a8_dfb5b222",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 9,
      "author": {
        "id": 1022037
      },
      "writtenOn": "2018-05-31T23:54:40Z",
      "side": 1,
      "message": "s/an/a/",
      "range": {
        "startLine": 9,
        "startChar": 68,
        "endLine": 9,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b9cb62be_3be33164",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 10,
      "author": {
        "id": 1022037
      },
      "writtenOn": "2018-05-31T23:54:40Z",
      "side": 1,
      "message": "... to the ICU4C C API (not C++) for ...",
      "range": {
        "startLine": 10,
        "startChar": 33,
        "endLine": 10,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba6e76a4_9d661385",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 37,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2018-05-30T23:44:46Z",
      "side": 1,
      "message": "jinja2 is not part of the stdlib, so you\u0027d need to import jinja2 into the tree and use python_binary_host in order to build this into a self-contained host tool for use in the build.",
      "range": {
        "startLine": 37,
        "startChar": 0,
        "endLine": 37,
        "endChar": 13
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d30f5f76_97d14fe6",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 37,
      "author": {
        "id": 1074628
      },
      "writtenOn": "2018-05-30T23:46:46Z",
      "side": 1,
      "message": "Ah, sorry, it\u0027s the other python script in the other change being used during the build. As long as this is only run by a small number of developers willing to install extra components into their environment, it wouldn\u0027t be critical to import jinja2 into the build.",
      "parentUuid": "ba6e76a4_9d661385",
      "range": {
        "startLine": 37,
        "startChar": 0,
        "endLine": 37,
        "endChar": 13
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d3bfc64_e2c1945a",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 37,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2018-06-01T20:47:53Z",
      "side": 1,
      "message": "Yeah, that was the plan since this isn\u0027t run by the build system.",
      "parentUuid": "d30f5f76_97d14fe6",
      "range": {
        "startLine": 37,
        "startChar": 0,
        "endLine": 37,
        "endChar": 13
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "77605398_61d4b8d2",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 50,
      "author": {
        "id": 1022037
      },
      "writtenOn": "2018-05-31T23:54:40Z",
      "side": 1,
      "message": "... from string from_str.",
      "range": {
        "startLine": 50,
        "startChar": 41,
        "endLine": 50,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3d614e8c_8eb649ce",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 50,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2018-06-01T20:47:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "77605398_61d4b8d2",
      "range": {
        "startLine": 50,
        "startChar": 41,
        "endLine": 50,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cbf5b5e1_b07d4b1f",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 100,
      "author": {
        "id": 1022037
      },
      "writtenOn": "2018-05-31T23:54:40Z",
      "side": 1,
      "message": "I suggest renaming this to short_header_path(...) or similar.",
      "range": {
        "startLine": 100,
        "startChar": 21,
        "endLine": 100,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f995239_549658ed",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 100,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2018-06-01T20:47:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cbf5b5e1_b07d4b1f",
      "range": {
        "startLine": 100,
        "startChar": 21,
        "endLine": 100,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f6d44cb7_c3ed42d0",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 160,
      "author": {
        "id": 1022037
      },
      "writtenOn": "2018-05-31T23:54:40Z",
      "side": 1,
      "message": "I am pretty sure that we are not consistent with prefixing exactly the @stable functions with U_STABLE. What we pay attention to is the @stable line in the API doc comment. Please look for that instead.\n\nWe are actually planning to get rid of the hard-to-keep-in-sync U_STABLE vs. U_DRAFT etc. things and just use U_CAPI.\n\nIn addition, We need to also include @deprecated ICU xyz functions starting from some cut-off xyz version, because they used to be @stable and they may be the only way to get at that functionality in an older version of ICU.",
      "range": {
        "startLine": 160,
        "startChar": 50,
        "endLine": 160,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9078cc09_636f17a4",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 160,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2018-06-01T20:47:53Z",
      "side": 1,
      "message": "I was wondering about that. I think it\u0027s actually easier to do based on the comment anyway.\n\n\u003e In addition, We need to also include @deprecated ICU xyz functions starting from some cut-off xyz version, because they used to be @stable and they may be the only way to get at that functionality in an older version of ICU.\n\nIn other words we should just go ahead and expose the deprecated APIs?",
      "parentUuid": "f6d44cb7_c3ed42d0",
      "range": {
        "startLine": 160,
        "startChar": 50,
        "endLine": 160,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "40f14940_0ef6cf85",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 160,
      "author": {
        "id": 1022037
      },
      "writtenOn": "2018-06-01T22:10:38Z",
      "side": 1,
      "message": "\u003e In other words we should just go ahead and expose the deprecated APIs?\n\nI think we have two choices:\na) whitelist some @deprecated APIs\nb) retain all @deprecated APIs starting from some version that had been @stable ICU \u003e\u003d4.4 before\n\nIt might be hard enough to figure out which @deprecated things were @stable before vs. went from @draft to @deprecated without ever being stable... that we just do a whitelist.\n\nIt would be ok to start right now with an empty whitelist.\n\nIt would also be ok if we start right now with omitting all @deprecated API, but revisit (and create a whitelist mechanism) only when the NDK ICU shim is updated and something that was @stable before gets @deprecated then. (This is easily visible in the API change report; we would need to pay attention to that.)\n\nExample 1:\n\nIn unicode/uidna.h we have old API that was originally written for IDNA2003. It is now @deprecated ICU 55. In the same header, we have newer API for IDNA2008, with an implementation of the superset UTS #46 spec. This is @stable ICU 4.6. That is, if the NDK shim is used on Gingerbread with ICU 4.4, then the newer API does not exist yet.\n\nWe could decide that\u0027s ok, and an app running on Gingerbread would just not get any IDNA API.\nOr we could whitelist it.\nOr we could retain all @stable ICU \u003e\u003d4.4 even if they later became @deprecated ICU \u003e\u003d4.6.\n\nExample 2:\n\nLet\u0027s say that you are publishing the first version of the NDK ICU shim based on ICU 60. I assume that the shim wants to be backward compatible. If so, then anything that is @stable ICU \u003c\u003d60 must always be there -- meaning that any such now-@stable API that is deprecated later (\u003e\u003d61) needs to be retained in the future, by whitelist or by rule.",
      "parentUuid": "9078cc09_636f17a4",
      "range": {
        "startLine": 160,
        "startChar": 50,
        "endLine": 160,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a863ed6a_70f2c87d",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 171,
      "author": {
        "id": 1022037
      },
      "writtenOn": "2018-05-31T23:54:40Z",
      "side": 1,
      "message": "Please add some details about u_strlen() in ICU 46. Otherwise this comment is mysterious.",
      "range": {
        "startLine": 171,
        "startChar": 69,
        "endLine": 171,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "565488e0_55fb6276",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 171,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2018-06-01T20:47:53Z",
      "side": 1,
      "message": "I\u0027m not the original author, so I\u0027m not sure what this is about either.\n\n@tbao: what\u0027s this about?",
      "parentUuid": "a863ed6a_70f2c87d",
      "range": {
        "startLine": 171,
        "startChar": 69,
        "endLine": 171,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a53ddfd7_aec42682",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 218,
      "author": {
        "id": 1022037
      },
      "writtenOn": "2018-05-31T23:54:40Z",
      "side": 1,
      "message": "s/and etc./etc./",
      "range": {
        "startLine": 218,
        "startChar": 79,
        "endLine": 218,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f8678694_e87104b7",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 218,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2018-06-01T20:47:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a53ddfd7_aec42682",
      "range": {
        "startLine": 218,
        "startChar": 79,
        "endLine": 218,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "24d5f515_e56b1e63",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 221,
      "author": {
        "id": 1022037
      },
      "writtenOn": "2018-05-31T23:54:40Z",
      "side": 1,
      "message": "This seems very specific. Will that clang-... number change often?",
      "range": {
        "startLine": 221,
        "startChar": 75,
        "endLine": 221,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0eb6582a_d537fa0d",
        "filename": "ndk/icu/gen_ndk_icu.py",
        "patchSetId": 9
      },
      "lineNbr": 221,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2018-06-01T20:47:53Z",
      "side": 1,
      "message": "Yes, but atm there isn\u0027t a better way to access this.\n\nI have updated this to use a more recent clang though.",
      "parentUuid": "24d5f515_e56b1e63",
      "range": {
        "startLine": 221,
        "startChar": 75,
        "endLine": 221,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "916ca467_c7bb9c6b",
        "filename": "ndk/icu/icundk.h",
        "patchSetId": 9
      },
      "lineNbr": 24,
      "author": {
        "id": 1022037
      },
      "writtenOn": "2018-05-31T23:54:40Z",
      "side": 1,
      "message": "Please add an API doc comment.",
      "range": {
        "startLine": 24,
        "startChar": 41,
        "endLine": 24,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "709bd2f3_6dbc79aa",
        "filename": "ndk/icu/icundk.h",
        "patchSetId": 9
      },
      "lineNbr": 24,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2018-06-01T20:47:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "916ca467_c7bb9c6b",
      "range": {
        "startLine": 24,
        "startChar": 41,
        "endLine": 24,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "94e788c9_17aba74c",
        "filename": "ndk/icu/templates/icundk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 27,
      "author": {
        "id": 1022037
      },
      "writtenOn": "2018-05-31T23:54:40Z",
      "side": 1,
      "message": "Could you add a comment for the uninitiated about the templating language/tool used here?",
      "range": {
        "startLine": 27,
        "startChar": 36,
        "endLine": 27,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3d06e6e2_d891749e",
        "filename": "ndk/icu/templates/icundk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 27,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2018-06-01T20:47:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "94e788c9_17aba74c",
      "range": {
        "startLine": 27,
        "startChar": 36,
        "endLine": 27,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e3f37912_d20ce8d5",
        "filename": "ndk/icu/templates/icundk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 36,
      "author": {
        "id": 1022037
      },
      "writtenOn": "2018-05-31T23:54:40Z",
      "side": 1,
      "message": "This is ok, but FYI we have no plan for what to do after 99...",
      "range": {
        "startLine": 36,
        "startChar": 36,
        "endLine": 36,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7cfe50ad_0bd27a84",
        "filename": "ndk/icu/templates/icundk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 36,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-06-01T00:03:17Z",
      "side": 1,
      "message": "that\u0027ll be someone else\u0027s problem anyway :-)",
      "parentUuid": "e3f37912_d20ce8d5",
      "range": {
        "startLine": 36,
        "startChar": 36,
        "endLine": 36,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f5e92c84_7126475b",
        "filename": "ndk/icu/templates/icundk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 36,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2018-06-01T20:47:53Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "7cfe50ad_0bd27a84",
      "range": {
        "startLine": 36,
        "startChar": 36,
        "endLine": 36,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c0389c4_06717be3",
        "filename": "ndk/icu/templates/icundk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 91,
      "author": {
        "id": 1022037
      },
      "writtenOn": "2018-05-31T23:54:40Z",
      "side": 1,
      "message": "I would use strtoul() and then check if the endptr is after the start and the rest of the string is \"l.dat\".",
      "range": {
        "startLine": 91,
        "startChar": 62,
        "endLine": 91,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3fd6fa16_2390005f",
        "filename": "ndk/icu/templates/icundk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 91,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2018-06-01T00:03:17Z",
      "side": 1,
      "message": "why? you\u0027re already looking in /system/usr/icu. more than that, bionic uses this exact code, so you\u0027re already protected by CTS.",
      "parentUuid": "5c0389c4_06717be3",
      "range": {
        "startLine": 91,
        "startChar": 62,
        "endLine": 91,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6b05f30b_1dfd6d8a",
        "filename": "ndk/icu/templates/icundk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 91,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2018-06-01T20:47:53Z",
      "side": 1,
      "message": "I don\u0027t care either way, but the change (if any) should be made in bionic first since I\u0027m just mirroring that.",
      "parentUuid": "3fd6fa16_2390005f",
      "range": {
        "startLine": 91,
        "startChar": 62,
        "endLine": 91,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "212ff87f_fc5b845c",
        "filename": "ndk/icu/templates/icundk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 157,
      "author": {
        "id": 1022037
      },
      "writtenOn": "2018-05-31T23:54:40Z",
      "side": 1,
      "message": "What happens if there is a mismatch between the set of functions in the system ICU vs. the set when the stub library was generated?\n\nIn previous discussion with Tao we discussed ways to set an unsupported-error if the function has that parameter and it\u0027s U_SUCCESS() so far, and I think he was returning (return.type)0 from functions that don\u0027t have the parameter.",
      "range": {
        "startLine": 157,
        "startChar": 65,
        "endLine": 157,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7c24e259_06c88673",
        "filename": "ndk/icu/templates/icundk.cpp",
        "patchSetId": 9
      },
      "lineNbr": 157,
      "author": {
        "id": 1043845
      },
      "writtenOn": "2018-06-01T20:47:53Z",
      "side": 1,
      "message": "That\u0027s what I\u0027ve added ndk_icu_available for. It\u0027s up to the user to guarantee that a function is available before calling it. This is fairly common in Android Java (though it would instead be done by comparing the function against null rather than calling an availability function), and is also how possibly-available EGL functions are accessed.",
      "parentUuid": "212ff87f_fc5b845c",
      "range": {
        "startLine": 157,
        "startChar": 65,
        "endLine": 157,
        "endChar": 0
      },
      "revId": "b0d5bc55074374692e256fa510539242dc99a2db",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}